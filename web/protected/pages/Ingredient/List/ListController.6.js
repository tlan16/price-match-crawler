var PageJs=new Class.create;
PageJs.prototype=Object.extend(new CRUDPageJs,{loadSelect2:function(){var a,d;jQuery("select.select2").each(function(){a={};if("Infinity"===$(this).readAttribute("data-minimum-results-for-search")||"infinity"===$(this).readAttribute("data-minimum-results-for-search")||-1==$(this).readAttribute("data-minimum-results-for-search"))a.minimumResultsForSearch="Infinity";jQuery(this).select2(a)});jQuery('[search_field="ingr.allergents"]').select2({allowClear:!0,multiple:!0,width:"100%",ajax:{delay:250,url:"/ajax/getAll",
type:"GET",data:function(a){return{searchTxt:"name like ?",searchParams:["%"+a+"%"],entityName:"Allergent",pageNo:1}},results:function(a,b,c){d=[];a.resultData&&a.resultData.items&&a.resultData.items.each(function(a){d.push({id:a.id,text:a.name,data:a})});return{results:d}}},cache:!0,escapeMarkup:function(a){return a}})},_getResultRow:function(a,d){var e,b,c;e=this;b=d||!1;c=!0===b?"strong":"span";return(new Element("span",{"class":"row"})).store("data",a).addClassName(!1===a.active&&!1===b?"warning":
"").addClassName("list-group-item").addClassName("item_row").writeAttribute("item_id",a.id).insert({bottom:(new Element(c,{"class":"name col-sm-6 col-xs-12"})).update(a.name)}).insert({bottom:(new Element(c,{"class":"description col-sm-2 col-xs-12"})).update(a.description)}).insert({bottom:(new Element(c,{"class":"allergents col-sm-2 col-xs-12"})).update(!0===b?"Allgergents":e._getNamesString(a.infos.allergents))}).insert({bottom:(new Element(c,{"class":"text-right btns col-sm-2 col-xs-12"})).update(!0===
b?(new Element("span",{"class":"btn btn-primary btn-xs",title:"New"})).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-plus"})}).insert({bottom:" NEW"}).observe("click",function(){e._openDetailsPage()}):(new Element("span",{"class":"btn-group btn-group-xs"})).insert({bottom:(new Element("span",{"class":"btn btn-primary",title:"Delete"})).insert({bottom:new Element("span",{"class":"glyphicon glyphicon-pencil"})}).observe("click",function(){e._openDetailsPage(a)})}).insert({bottom:(new Element("span")).addClassName(!1===
a.active&&!1===b?"btn btn-success":"btn btn-danger").writeAttribute("title",!1===a.active&&!1===b?"Re-activate":"De-activate").insert({bottom:(new Element("span")).addClassName(!1===a.active&&!1===b?"glyphicon glyphicon-repeat":"glyphicon glyphicon-trash")}).observe("click",function(){if(!confirm("Are you sure you want to "+(!0===a.active?"DE-ACTIVATE":"RE-ACTIVATE")+" this item?"))return!1;e._deleteItem(a,a.active)})}))})}});